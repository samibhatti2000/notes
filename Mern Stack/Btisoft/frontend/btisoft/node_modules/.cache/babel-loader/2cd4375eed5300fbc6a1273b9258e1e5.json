{"ast":null,"code":"import _asyncToGenerator from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/regenerator/index.js\";import{Button,Typography}from'@mui/material';import{makeStyles}from'@mui/styles';import DeleteIcon from'@mui/icons-material/Delete';import axios from'axios';import React,{useEffect,useState}from'react';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{fetchContact}from'../../redux/reduxAxois/fetchContact';import DashSideBar from'./DashSideBar';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyle=makeStyles(function(theme){return{flex_center:{display:'flex',flexWrap:'wrap'// justifyContent:'center',\n// alignItems:'flex-start'\n},card:{padding:'2vmax',margin:'2vmax',border:'1px solid black',position:'relative'},deletIcon:{color:'red'}};});var AdminContact=function AdminContact(){var alert=useAlert();var classes=useStyle();var dispatch=useDispatch();var contact=useSelector(function(state){return state.contact;});var allQuries=contact.allQuries,loading=contact.loading;console.log(allQuries.length);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loader=_useState2[0],setLoader=_useState2[1];// useEffect(() => {\n//   fetchContact(dispatch);\n// })\nuseEffect(function(){fetchContact(dispatch);if(!loading){setLoader(false);}},[dispatch,alert]);var token=window.localStorage.getItem('token');if(!token){return/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/admin/login\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',position:\"absolute\",height:\"100%\",zIndex:\"10000\",background:\"white\"},children:[/*#__PURE__*/_jsx(DashSideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.flex_center,style:{},children:allQuries&&allQuries.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:classes.card,children:[/*#__PURE__*/_jsxs(Typography,{children:[\"name: \",allQuries[index].name]}),/*#__PURE__*/_jsxs(Typography,{children:[\"email: \",allQuries[index].email]}),/*#__PURE__*/_jsxs(Typography,{children:[\"phone: \",allQuries[index].phone]}),/*#__PURE__*/_jsxs(Typography,{children:[\"massage: \",allQuries[index].massage]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var req;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"/api/v1/delete/contact/\".concat(allQuries[index]._id));case 2:req=_context.sent;if(req.data.success===true){fetchContact(dispatch);alert.success('contact deleted');}case 4:case\"end\":return _context.stop();}}},_callee);})),children:/*#__PURE__*/_jsx(DeleteIcon,{className:classes.deletIcon,sx:{}})})]},index);})})]});};export default AdminContact;","map":{"version":3,"sources":["/home/sam/Btisoft/frontend/btisoft/src/App/component/adminComponent/AdminContact.js"],"names":["Button","Typography","makeStyles","DeleteIcon","axios","React","useEffect","useState","useAlert","useDispatch","useSelector","fetchContact","DashSideBar","Navigate","useStyle","theme","flex_center","display","flexWrap","card","padding","margin","border","position","deletIcon","color","AdminContact","alert","classes","dispatch","contact","state","allQuries","loading","console","log","length","loader","setLoader","token","window","localStorage","getItem","height","zIndex","background","map","item","index","name","email","phone","massage","delete","_id","req","data","success"],"mappings":"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","sourcesContent":["import { Button, Typography } from '@mui/material';\nimport { makeStyles } from '@mui/styles';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react'\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchContact } from '../../redux/reduxAxois/fetchContact';\nimport DashSideBar from './DashSideBar'\nimport { Navigate } from 'react-router-dom';\n\nconst useStyle = makeStyles((theme)=>({\n  flex_center:{\n    display:'flex', \n    flexWrap:'wrap',\n    // justifyContent:'center',\n    // alignItems:'flex-start'\n  },\n  card:{\n    padding:'2vmax',\n    margin:'2vmax',\n    border: '1px solid black',\n    position:'relative'\n  },\n  deletIcon:{\n    color:'red',\n  \n  }\n\n}));\n\nconst AdminContact = () => {\n\n  const alert = useAlert();\n  const classes = useStyle();\n\n  const dispatch = useDispatch();\n  const contact = useSelector((state) => state.contact);\n  const {allQuries, loading} = contact\n\n  console.log(allQuries.length);\n\n  const [loader, setLoader]=useState(true)\n\n\n  // useEffect(() => {\n\n  //   fetchContact(dispatch);\n  // })\n\n  useEffect(() => {\n\n    fetchContact(dispatch);\n    if(!loading){\n      setLoader(false)\n    }\n    \n\n  }, [dispatch, alert])\n\n  const token = window.localStorage.getItem('token')\n  if(!token){\n    return <Navigate replace to=\"/admin/login\" />;\n\n  }\n\n  return (\n    <div style={{display:'flex', position:\"absolute\", height:\"100%\", zIndex:\"10000\", background:\"white\"}}>\n    <DashSideBar />\n      <div className={classes.flex_center} style={{}}>\n      \n      {allQuries && allQuries.map((item,index)=>(\n        <div className={classes.card} key={index}>\n \n          <Typography>name: {allQuries[index].name}</Typography>\n          <Typography>email: {allQuries[index].email}</Typography>\n          <Typography>phone: {allQuries[index].phone}</Typography>\n          <Typography>massage: {allQuries[index].massage}</Typography>\n\n          <Button variant='primary' onClick={async()=>{\n            const req = await axios.delete(`/api/v1/delete/contact/${allQuries[index]._id}`)\n            if(req.data.success === true){\n              fetchContact(dispatch);\n              alert.success('contact deleted')\n            }\n          \n          }}\n          ><DeleteIcon \n            className={classes.deletIcon}\n            sx={{}}\n          /></Button>\n        </div>\n      ))}\n\n\n      </div>\n    </div>\n  )\n}\n\nexport default AdminContact;"]},"metadata":{},"sourceType":"module"}