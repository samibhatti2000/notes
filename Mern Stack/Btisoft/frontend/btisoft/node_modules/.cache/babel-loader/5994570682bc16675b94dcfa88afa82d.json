{"ast":null,"code":"import _toConsumableArray from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/home/sam/Btisoft/frontend/btisoft/node_modules/@babel/runtime/regenerator/index.js\";import{Button}from\"@mui/material\";import{makeStyles}from\"@mui/styles\";import axios from\"axios\";import React,{useState}from\"react\";import{useDispatch}from\"react-redux\";import{Navigate}from\"react-router-dom\";import DashSideBar from\"./DashSideBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyle=makeStyles(function(theme){return{flex_center:{display:\"flex\",flexWrap:\"wrap\",justifyContent:\"center\",alignItems:\"center\"},flex_column:{display:\"flex\",flexWrap:\"wrap\",flexDirection:\"column\"},input:{padding:\"1vmax\",margin:\"1vmax\"},createProductFormImage:{width:'100%',overflow:'auto'},Formimg:_defineProperty({width:'3vmax',margin:'0 0.5vmax'},\"margin\",'1vmax 0.1vmax'),card:{padding:\"2vmax\",margin:\"2vmax\",border:\"1px solid black\",position:\"relative\"},deletIcon:{color:\"red\"}};});var AdminCreateProduct=function AdminCreateProduct(){// const alert = useAlert();\nvar classes=useStyle();var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),images=_useState10[0],setImages=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),imagesPreview=_useState12[0],setImagesPreview=_useState12[1];var createProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(mydata){var config,_yield$axios$post$the,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context.next=3;return axios.post(\"/api/v1/admin/product/new\",mydata,config).then(console.log(\"product creadted successfull\")).catch(function(error){console.error(error);});case 3:_yield$axios$post$the=_context.sent;data=_yield$axios$post$the.data;console.log(data);if(data.success===true){window.alert(\"product created succesfull!\");console.log(\"product created\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function createProduct(_x){return _ref.apply(this,arguments);};}();var createProductForm=function createProductForm(e){e.preventDefault();var myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"price\",price);myForm.set(\"description\",description);myForm.set(\"category\",category);images.forEach(function(image){myForm.append(\"images\",image);});var dt={\"name\":\"test\",\"description\":\"test\",\"price\":\"2000\",\"category\":\"test\",\"public_id\":\"test\",\"url\":\"test\",\"images\":0};createProduct(myForm);};var createProductImagesChange=function createProductImagesChange(e){var files=Array.from(e.target.files);setImages([]);setImagesPreview([]);files.forEach(function(file){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setImagesPreview(function(old){return[].concat(_toConsumableArray(old),[reader.result]);});setImages(function(old){return[].concat(_toConsumableArray(old),[reader.result]);});}};reader.readAsDataURL(file);});};var token=window.localStorage.getItem('token');if(!token){return/*#__PURE__*/_jsx(Navigate,{replace:true,to:\"/admin/login\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",position:\"fixed\",width:\"100vw\",zIndex:\"10000\",background:\"white\"},children:[/*#__PURE__*/_jsx(DashSideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:classes.flex_center,style:{width:\"100%\",height:\"100vh\"},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:createProductForm,encType:\"multipart/form-data\",className:classes.flex_column,children:[/*#__PURE__*/_jsx(\"input\",{value:name,placeholder:\"product name\",className:classes.input,onChange:function onChange(e){setName(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{value:description,placeholder:\"description\",className:classes.input,onChange:function onChange(e){setDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{value:price,placeholder:\"price\",className:classes.input,onChange:function onChange(e){setPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{value:category,placeholder:\"category\",className:classes.input,onChange:function onChange(e){setCategory(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",accept:\"image/*\",onChange:createProductImagesChange,multiple:true}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.createProductFormImage).concat(classes.input),children:imagesPreview.map(function(image,index){return/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"Product Preview\",className:classes.Formimg},index);})}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",type:\"submite\",children:\"Create\"})]})})]});};export default AdminCreateProduct;","map":{"version":3,"sources":["/home/sam/Btisoft/frontend/btisoft/src/App/component/adminComponent/AdminCreateProduct.js"],"names":["Button","makeStyles","axios","React","useState","useDispatch","Navigate","DashSideBar","useStyle","theme","flex_center","display","flexWrap","justifyContent","alignItems","flex_column","flexDirection","input","padding","margin","createProductFormImage","width","overflow","Formimg","card","border","position","deletIcon","color","AdminCreateProduct","classes","dispatch","name","setName","description","setDescription","price","setPrice","category","setCategory","images","setImages","imagesPreview","setImagesPreview","createProduct","mydata","config","headers","post","then","console","log","catch","error","data","success","window","alert","createProductForm","e","preventDefault","myForm","FormData","set","forEach","image","append","dt","createProductImagesChange","files","Array","from","target","file","reader","FileReader","onload","readyState","old","result","readAsDataURL","token","localStorage","getItem","zIndex","background","height","value","map","index"],"mappings":"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","sourcesContent":["import { Button } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\nimport DashSideBar from \"./DashSideBar\";\n\n\n\nconst useStyle = makeStyles((theme) => ({\n  flex_center: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  flex_column: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    flexDirection: \"column\",\n  },\n  input: {\n    padding: \"1vmax\",\n    margin: \"1vmax\",\n  },\n  createProductFormImage:{\n    width: '100%',\n    overflow: 'auto',\n  },\n  Formimg:{\n    width: '3vmax',\n    margin: '0 0.5vmax',\n    margin:'1vmax 0.1vmax'\n\n  },\n  card: {\n    padding: \"2vmax\",\n    margin: \"2vmax\",\n    border: \"1px solid black\",\n    position: \"relative\",\n  },\n  deletIcon: {\n    color: \"red\",\n  },\n}));\n\nconst AdminCreateProduct = () => {\n  // const alert = useAlert();\n  const classes = useStyle();\n\n  const dispatch = useDispatch();\n\n  const [name, setName] = useState();\n  const [description, setDescription] = useState();\n  const [price, setPrice] = useState();\n  const [category, setCategory] = useState();\n  const [images, setImages] = useState([]);\n  const [imagesPreview, setImagesPreview] = useState([]);\n\n  const createProduct = async (mydata) => {\n    const config = {\n      headers: { \"Content-Type\": \"application/json\" },\n    };\n    const {data} = await axios.post(\"/api/v1/admin/product/new\", mydata, config).then(\n      console.log(\"product creadted successfull\")).catch((error) => {\n      console.error(error);\n    });\n    console.log(data);\n    if (data.success === true) {\n      window.alert(\"product created succesfull!\");\n      console.log(\"product created\");\n    }\n\n  };\n  const createProductForm = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n\n    myForm.set(\"name\", name);\n    myForm.set(\"price\", price);\n    myForm.set(\"description\", description);\n    myForm.set(\"category\", category);\n\n    images.forEach((image) => {\n      myForm.append(\"images\", image);\n    });\n\n    const dt = {\n      \"name\":\"test\",\n      \"description\":\"test\",\n      \"price\":\"2000\",\n      \"category\":\"test\",\n      \"public_id\":\"test\",\n      \"url\":\"test\",\n      \"images\":0\n  }\n\n  createProduct(myForm);\n  };\n\n  const createProductImagesChange = (e) => {\n    const files = Array.from(e.target.files);\n\n    setImages([]);\n    setImagesPreview([]);\n\n    files.forEach((file) => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setImagesPreview((old) => [...old, reader.result]);\n          setImages((old) => [...old, reader.result]);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const token = window.localStorage.getItem('token')\n  if(!token){\n    return <Navigate replace to=\"/admin/login\" />;\n\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        position: \"fixed\",\n        width: \"100vw\",\n        zIndex: \"10000\",\n        background: \"white\",\n      }}\n    >\n      <DashSideBar />\n      <div\n        className={classes.flex_center}\n        style={{ width: \"100%\", height: \"100vh\" }}\n      >\n        <form\n          onSubmit={createProductForm}\n          encType=\"multipart/form-data\"\n          className={classes.flex_column}\n        >\n          <input\n            value={name}\n            placeholder=\"product name\"\n            className={classes.input}\n            onChange={(e) => {\n              setName(e.target.value);\n            }}\n          />\n          <input\n            value={description}\n            placeholder=\"description\"\n            className={classes.input}\n            onChange={(e) => {\n              setDescription(e.target.value);\n            }}\n          />\n          <input\n            value={price}\n            placeholder=\"price\"\n            className={classes.input}\n            onChange={(e) => {\n              setPrice(e.target.value);\n            }}\n          />\n          <input\n            value={category}\n            placeholder=\"category\"\n            className={classes.input}\n            onChange={(e) => {\n              setCategory(e.target.value);\n            }}\n          />\n          <input\n            type=\"file\"\n            name=\"avatar\"\n            accept=\"image/*\"\n            onChange={createProductImagesChange}\n            multiple\n          />\n          <div className={`${classes.createProductFormImage}${classes.input}`}>\n            {imagesPreview.map((image, index) => (\n              <img key={index} src={image} alt=\"Product Preview\" className={classes.Formimg} />\n            ))}\n          </div>\n          <Button color=\"secondary\" type=\"submite\">\n            Create\n          </Button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminCreateProduct;\n"]},"metadata":{},"sourceType":"module"}